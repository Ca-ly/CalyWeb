# Frontend

## Prerequisites
Ensure these prerequisites are performed within the Pipenv shell used previously in Part I.

### Installing Node `>= 16.0.0`
Assuming a Debian based system, like Ubuntu, running the following commands will add the external repository with the latest Node versions. Do not simply try to install using the `apt` command as it will retrieve an older, incompatible version of Node.

```sh
sudo apt-get update
sudo apt-get install -y ca-certificates curl gnupg
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
NODE_MAJOR=20
echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodistro main" | sudo tee /etc/apt/sources.list.d/nodesource.list
sudo apt-get update
sudo apt-get install nodejs -y
```

You can verify whether the correct version of Node was installed or not using 
```sh
node --version
```
which should output a value `>= 16.0.0`.

### Installing Yarn

#### Without external distributions
Installing Yarn is possible via NPM (Node Package Manager) which comes bundled with Node. However, it may not be recommended to install it this way. If you have a Debian based system, you can follow a similar procedure to install Yarn as Node. This is given below.

```sh
curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
sudo apt update && sudo apt install yarn
```
To ensure Yarn was correctly installed, check using
```sh
yarn --version
```
> **Note:** Ensure that you do not have any other forms of Yarn installed, viz. Hadoop Yarn. Yarn, in this documentation, refers to yarnpkg.

#### With NPM
Installing with NPM is simple. Run the following one line command.
```sh
npm install --global yarn
```
However, the previous method is recommended.

### Other packages
Some other packages must be installed via pip, for which you can simply copy and paste the following:
```sh
pip install markdown
pip install black
pip install django-cors-headers
pip install djangorestframework-simplejwt
pip install psycopg2
pip install google-auth
pip install google-api-python-client
pip install python-dateutil
pip install dj-rest-auth-social
pip install django-allauth==0.50.0 
pip install psycopg2-binary
pip install cryptography
pip install pytz
```

## Further configuration

### Edit the Environment variables
First, copy `./frontend/.env.example` to `./app/.env.local`. You can do this by running the following command.
```sh
mv .env.example .env.local
```
Now, add the configuration information of the Google Calendar API that was set up previously, to this `.env.local` file. Edit the `.env.local` file using your preferred text editor, and ensure it looks like the following:
```
GOOGLE_CLIENT_ID=ADD_CLIENTID_HERE
GOOGLE_CLIENT_SECRET=ADD_CLIENTSECRET_HERE
SESSION_SECRET="ADD_SESSIONSECRET_HERE"
NEXT_PUBLIC_BACKEND_URL=http://127.0.0.1:8000
JWT_SECRET=ADD_SESSIONSECRET_HERE
NEXT_PUBLIC_APP_URL=http://localhost:3000
DEBUG_MODE=true
NEXT_PUBLIC_GOOGLE_TRACKING_ID=TRACKINGID
```
> **Note:** Replace the `SESSION_SECRET` with one generated by you previously in step I.2.1.

### Running the frontend
Run the following commands from the `../frontend/` path. 
```sh
yarn
```
and finally
```sh
yarn dev
```
resulting in
```sh
(meetsy) user@os:~//meetsy/frontend$ yarn dev
yarn run v1.22.19
$ next
ready - started server on 0.0.0.0:3000, url: http://localhost:3000
info  - Loaded env from /home/meetsy/frontend/.env.local
event - compiled client and server successfully in 1289 ms (2145 modules)
```
Now, you can visit `http://localhost:3000` to access Caly/Meetsy. Try signing in using Google (Click on "Let's Meetsy" on the homepage) to ensure all API keys are configured appropriately. 

If everything has gone perfectly so far, you should be able to "Create Meet".